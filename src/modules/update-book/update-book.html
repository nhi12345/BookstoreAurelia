<template>
  <div class="card">
    <div class="card-header text-white bg-dark">
      Update Book
    </div>
    <div class="card-body">
      <form role="form">
        <div class="form-group row">
          <label class="col-md-3 col-form-label">Name</label>
          <div class="col-md-9" validation-errors.bind="nameErrors"
          class.bind="nameErrors.length ? 'has-error' : ''">
            <input type="text" placeholder="Title" class="form-control" value.bind="name & validate">
            <small class="help-block error-mess" repeat.for="errorInfo of nameErrors">
              ${errorInfo.error.message}
            </small>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-md-3 col-form-label">Author</label>
          <div class="col-md-9">
            <select class="form-control" id="author" value.bind="book.author">
              <option repeat.for="author of authors"
              model.bind="author">${author.name}</option>
            </select>
          </div>
        </div>

        <div class="form-group row" validation-errors.bind="priceErrors"
        class.bind="priceErrors.length ? 'has-error' : ''">
          <label class="col-md-3 col-form-label">Price</label>
          <div class="col-md-9">
            <input type="number" placeholder="Price" class="form-control" value.bind="price & validate">
            <small class="help-block error-mess" repeat.for="errorInfo of priceErrors">
              ${errorInfo.error.message}
            </small>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-md-3 col-form-label">Publisher</label>
          <div class="col-md-9">
            <input type="text" placeholder="Publisher" class="form-control" value.bind="book.publisher">
          </div>
        </div>

        <div class="form-group row" validation-errors.bind="yearErrors"
        class.bind="yearErrors.length ? 'has-error' : ''">
          <label class="col-md-3 col-form-label">Year</label>
          <div class="col-md-9">
            <input type="number" placeholder="Year" class="form-control" value.bind="year & validate">
            <small class="help-block error-mess" repeat.for="errorInfo of yearErrors">
              ${errorInfo.error.message}
            </small>
          </div>
        </div>

        <div class="form-group row">
          <label class="col-md-3 col-form-label">Description</label>
          <div class="col-md-9">
            <input type="text" placeholder="Description" class="form-control" value.bind="book.description">
          </div>
        </div>

        <div class="form-group row">
          <label class="col-md-3 col-form-label">Image</label>
          <div class="col-md-9">
            <input type="file" files.bind="cover" class="form-control-file" id="cover" changed.delegate="convertImageToBase64($event)">
          </div>
        </div>
        <div>
          <button class="btn btn-success float-right" click.delegate="ok()">Save</button>
          <button type="button" class="btn btn-default float-right" click.trigger="cancel()">No</button>
        </div>
    </div>
  </div>
</template>